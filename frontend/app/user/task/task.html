<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../global/global.css" />
    <link rel="stylesheet" href="./task.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.min.js"></script>
        <script type="module" src="../global/connectwallet.js " ></script>
    <script type="module" src="../global/sidebar.js"></script>
</head>
<body>
    <div data-include="../global/header.html"></div>







<div class="background">
   <div class="page">

  <!-- ================= ACTIVE ================= -->
   <div class="active">
  <h1 class="page-title">Task Created</h1>

  <div class="projects-toolbar">
    <input type="text" id="searchActive" placeholder="Search Task...">
    <select id="filterActive">
      <option value="newest">Newest</option>
      <option value="oldest">Oldest</option>
      <option value="stakeHigh">Highest Stake</option>
      <option value="stakeLow">Lowest Stake</option>
      <option value="deadlineSoon">Closest Deadline</option>
      <option value="deadlineLate">Farthest Deadline</option>
      <option value="reputationHigh">Author Reputation ↑</option>
      <option value="reputationLow">Author Reputation ↓</option>
    </select>
  </div>

  <div id="activeList" class="ActiveTaskContainer"></div>

  <template id="taskCardTemplate">
  <div class="task-card">
    <div class="card-header">
      <div class="indicator green"></div>
      <h2><span class="title"></span></h2>
      <span class="task-status badge"></span>
      <span class="task-value badge"></span>
    </div>

    <div class="task-info">
      <p><span>Task ID:</span> <span class="taskId">-</span></p>
      <p><span>Status:</span> <span class="status">-</span></p>
      <p><span>Value Category:</span> <span class="value">-</span></p>
      <p><span>Creator:</span> <span class="creator">-</span></p>
      <p><span>Assigned Member:</span> <span class="member">-</span></p>
      <p><span>Reward:</span> <span class="reward">-</span> <span>ETH</span></p>
      <p><span>Deadline Hours:</span> <span class="deadlineHours">-</span> <span>hours</span></p>
      <p><span>Deadline At:</span> <span class="deadlineAt">-</span></p>
      <p><span>Created At:</span> <span class="createdAt">-</span></p>
      <p><span>Creator Stake:</span> <span class="creatorStake">-</span> <span>ETH</span></p>
      <p><span>Member Stake:</span> <span class="memberStake">-</span> <span>ETH</span></p>
      <p><span>Max Revisions:</span> <span class="maxRevision">-</span></p>
      <p><span>GitHub URL:</span> <a href="#" target="_blank" class="githubURL">-</a></p>
    </div>

    <div class="stake-status">
      <p><span>Member Stake Locked:</span> <span class="isMemberStakeLocked">-</span></p>
      <p><span>Creator Stake Locked:</span> <span class="isCreatorStakeLocked">-</span></p>
      <p><span>Reward Claimed:</span> <span class="isRewardClaimed">-</span></p>
      <p><span>Task Exists:</span> <span class="exists">-</span></p>
    </div>

    <div class="task-actions">
      <button class="ActivateTask"></button>
      <button class="OpenRegisteration"></button>
      <button class="CloseRegisteration"></button>
      <button class="CancelTask"></button>
      <button class="RequestRevision"></button>
      <button class="ApproveTask"></button>
    </div>
  </div>
</template>

<template id="taskExtensionFormTemplate">
  <div class="extension-form-container">
    <form class="task-extension-form">
      <h3>Request Task Deadline Extension</h3>
      
      <!-- Additional Deadline Hours Field -->
      <div class="form-group">
        <label for="additionalDeadlineHours">Additional Hours *</label>
        <div class="input-with-helper">
          <div class="input-with-unit">
            <input 
              type="number" 
              id="additionalDeadlineHours" 
              name="additionalDeadlineHours" 
              min="1" 
              max="720"
              step="1"
              required
              placeholder="Enter hours"
              class="form-input"
            >
            <span class="input-unit">hours</span>
          </div>
          <span class="helper-text">Additional time needed to complete the task (1-720 hours)</span>
        </div>
        <div class="time-preview">
          <p>Extension will add: <span id="hoursPreview">0</span> hours</p>
          <p>Approximate new deadline: <span id="deadlinePreview">-</span></p>
        </div>
      </div>
      
      <!-- Note Field -->
      <div class="form-group">
        <label for="note">Revision Note *</label>
        <div class="input-with-helper">
          <textarea 
            id="note" 
            name="note" 
            rows="4" 
            required
            placeholder="Explain why you need more time, what challenges you're facing, etc..."
            class="form-textarea"
          ></textarea>
          <span class="helper-text">Detailed explanation for the revison request</span>
        </div>
      </div>
      
      <!-- Extension Summary -->
      <div class="summary-section">
        <h4>Extension Summary</h4>
        <div class="summary-grid">
          <div class="summary-item">
            <span class="summary-label">Additional Time:</span>
            <span class="summary-value" id="summaryHours">-</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Extension Reason:</span>
            <span class="summary-value summary-truncate" id="summaryReason">-</span>
          </div>
        </div>
      </div>
      
      <!-- Form Actions -->
      <div class="form-actions">
        <button type="submit" class="submit-btn">
          <span class="btn-text">Submit Extension Request</span>
          <span class="btn-loading hidden">Processing...</span>
        </button>
      </div>
      
      <!-- Status Messages -->
      <div class="status-message hidden" id="formStatus">
        <!-- Success or error messages will appear here -->
      </div>
    </form>
  </div>
</template>
   </div>












  <!-- ================= Member ================= -->
   <div class="Joined">
  <h1 class="page-title" style="margin-top:40px;">Joined Task</h1>

  <div class="projects-toolbar">
    <input type="text" id="searchInactive" placeholder="Search Task...">
    <select id="filterInactive">
      <option value="newest">Newest</option>
      <option value="oldest">Oldest</option>
      <option value="stakeHigh">Highest Stake</option>
      <option value="stakeLow">Lowest Stake</option>
      <option value="deadlineSoon">Closest Deadline</option>
      <option value="deadlineLate">Farthest Deadline</option>
      <option value="reputationHigh">Author Reputation ↑</option>
      <option value="reputationLow">Author Reputation ↓</option>
    </select>
  </div>


  <div id="inactiveList" class="JoinedTaskContainer"></div>

  <template id="taskCardTemplate">
  <div class="task-card">
    <div class="card-header">
      <div class="indicator green"></div>
      <h2><span class="title"></span></h2>
    </div>

    <div class="task-info">
      <p><span>Id:</span> <span class="taskId">-</span></p>
      <p><span>Status:</span> <span class="status">-</span></p>
      <p><span>reward:</span> <span class="reward">-</span> <span>ETH</span></p>
      <p><span>creator:</span> <span class="CreatorAddress">-</span></p>
      <p><span>deadline:</span> <span class="deadlineTime">-</span></p>
      <p><span>maxRevision:</span> <span class="revison">-</span></p>
      <p><span>githubURl:</span> <span class="TaskGithubURl">-</span></p>
    </div>
    <div class="stake-status">
      <p><span>Member Stake Locked:</span> <span class="isMemberStakeLocked">-</span></p>
      <p><span>Creator Stake Locked:</span> <span class="isCreatorStakeLocked">-</span></p>
      <p><span>Reward Claimed:</span> <span class="isRewardClaimed">-</span></p>
    </div>

    <button class="SubmitTask"></button>
    <button class="ReSubmitTask"></button>
    <button class="CancelTask"></button>
  </div>
</template>

<!--resubmit template-->

<template id="taskUpdateFormTemplate">
  <div class="update-form-container">
    <form class="task-update-form">
      <h3>Update Task Information</h3>
      
      <!-- Note Field -->
      <div class="form-group">
        <label for="note">Update Note *</label>
        <div class="input-with-helper">
          <textarea 
            id="note" 
            name="note" 
            rows="4" 
            required
            placeholder="Describe the update, fixes made, or any relevant information..."
            class="form-textarea"
          ></textarea>
          <span class="helper-text">Description of the changes or progress made</span>
        </div>
      </div>
      
      <!-- Github Fixed URL Field -->
      <div class="form-group">
        <label for="githubFixedURL">GitHub Fixed URL *</label>
        <div class="input-with-helper">
          <input 
            type="url" 
            id="githubFixedURL" 
            name="githubFixedURL" 
            required
            placeholder="https://github.com/username/repo/pull/123"
            pattern="https?://github\.com/.+/.+"
            class="form-input"
          >
          <span class="helper-text">Link to PR, commit, or issue with the fix</span>
        </div>
        <div class="url-preview" id="githubPreview">
          <!-- Preview will be shown here -->
        </div>
      </div>
      
      <!-- Form Actions -->
      <div class="form-actions">
        <button type="submit" class="submit-btn">
          <span class="btn-text">Submit Update</span>
          <span class="btn-loading hidden">Processing...</span>
        </button>
      </div>
      
      <!-- Status Messages -->
      <div class="status-message hidden" id="formStatus">
        <!-- Success or error messages will appear here -->
      </div>
    </form>
  </div>
</template>
   </div>




  <!-- ================= CREATE ================= --> <!-- creatte task tambahkan buat up pict juga-->

  <div class="create-task section">
  <h1 class="page-title">Create Task</h1>

  <form class="taskForm">

    <input type="text" name="title" placeholder="Task Title" required>

    <input type="text" name="github" placeholder="GitHub pull request URL" required>

    <input type="number" name="deadlineHours" placeholder="Deadline (in hours)" required>

    <input type="number" name="maxRevision" placeholder="Maximum Revision" required>

    <div class="RewardRow">
      <input type="number" name="reward" placeholder="Reward Value" required>
      <select id="rewardUnit">
        <option value="wei">Wei</option>
        <option value="eth">Ether</option>
      </select>
    </div>

    <button type="submit">Create Task</button>
  </form>
</div>


</div>

</div>







    <div data-include="../global/footer.html"></div>

    <script>
document.querySelectorAll("[data-include]").forEach(async el => {
    const file = el.getAttribute("data-include");
    const res = await fetch(file);
    el.innerHTML = await res.text();
});
</script>

</body>
</html>