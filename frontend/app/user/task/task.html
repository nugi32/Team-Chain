<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="../global/global.css" />
  <link rel="stylesheet" href="./task.css" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.min.js"></script>
  <script type="module" src="../global/connectwallet.js"></script>
  <script type="module" src="../global/sidebar.js"></script>
  <script type="module" src="./task.js"></script>
</head>

<body>
  <div data-include="../global/header.html"></div>

  <div class="background">
    <div class="test">
      <button id="test">Refresh</button>
    </div>


    <!-- ================= author ================= -->
    <div class="taskShow">
      <div class="active">
        <h1>Task Created</h1>

        <div class="projects-toolbar">
          <input type="text" id="searchActive" placeholder="Search Task..." />
          <select id="filterActive">
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
            <option value="stakeHigh">Highest Stake</option>
            <option value="stakeLow">Lowest Stake</option>
            <option value="deadlineSoon">Closest Deadline</option>
            <option value="deadlineLate">Farthest Deadline</option>
            <option value="reputationHigh">Point ↑</option>
            <option value="reputationLow">Point ↓</option>
          </select>
        </div>

        <div id="activeList" class="ActiveTaskContainer"></div>

        <template id="taskCardTemplate">
          <div class="card">
            <div class="card-header">
              <h2><span class="title"></span></h2>
            </div>

            <div class="task-info">
              <p><span>Task ID:</span> <span class="taskId">-</span></p>
              <p><span>Status:</span> <span class="status">-</span></p>
              <p><span>Point:</span> <span class="Points">-</span></p>
            </div>

            <div class="card-button">
              <button class="detailsBTN">See Deatils</button>
            </div>
          </div>
        </template>
      </div>

      <!-- ================= Member ================= -->
      <div class="Joined">
        <h1>Joined Task</h1>

        <div class="projects-toolbar">
          <input type="text" id="searchInactive" placeholder="Search Task..." />
          <select id="filterInactive">
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
            <option value="stakeHigh">Highest Stake</option>
            <option value="stakeLow">Lowest Stake</option>
            <option value="deadlineSoon">Closest Deadline</option>
            <option value="deadlineLate">Farthest Deadline</option>
            <option value="reputationHigh">Point ↑</option>
            <option value="reputationLow">point ↓</option>
          </select>
        </div>

        <div id="JoinedList" class="JoinedTaskContainer"></div>

        <template id="JtaskCardTemplate">
          <div class="card">
            <div class="card-header">
              <h2><span class="title"></span></h2>
            </div>

            <div class="task-info">
              <p><span>Task ID:</span> <span class="taskId">-</span></p>
              <p><span>Status:</span> <span class="status">-</span></p>
              <p><span>Point:</span> <span class="Points">-</span></p>
            </div>

            <div class="card-button">
              <button class="JdetailsBTN">See Deatils</button>
            </div>
          </div>
        </template>
      </div>
    </div>

    <!-- ================= CREATE ================= -->
    <!-- creatte task tambahkan buat up pict juga -->
    <div class="card">
      <h1 class="page-title">Create Task</h1>

      <form class="taskForm">
        <input type="text" name="title" placeholder="Task Title" required />
        <input type="text" name="github" placeholder="GitHub pull request URL" required />
        <input type="number" name="deadlineHours" placeholder="Deadline (in hours)" required />
        <input type="number" name="maxRevision" placeholder="Maximum Revision" required />

        <div class="RewardRow">
          <input type="number" name="reward" placeholder="Reward Value" required />
          <select id="rewardUnit">
            <option value="wei">Wei</option>
            <option value="eth">Ether</option>
          </select>
        </div>

        <button type="submit">Create Task</button>
      </form>
    </div>

  </div>

  <div data-include="../global/footer.html"></div>

  <script>
    document.querySelectorAll("[data-include]").forEach(async el => {
      const file = el.getAttribute("data-include");
      const res = await fetch(file);
      el.innerHTML = await res.text();
    });
  </script>
</body>
</html>
