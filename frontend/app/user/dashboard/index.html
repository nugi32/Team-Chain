<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../global/global.css" />
    <script type="module" src="../global/sidebar.js"></script>
    <script type="module" src="../global/router.js"></script>
    <script type="module" src="../global/connectwallet.js"></script>
    <script type="module" src="./index.js"></script>

      <!-- UI scripts -->
  <script src="../../global-Ux/loading-ui.js"></script>
  <script src="../../global-Ux/ui-core.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <!-- Header section -->
  <header class="topbar">
    <!-- Brand logo and name -->
    <div class="brand">
      <h1>Team chain</h1>
    </div>

    <!-- Wallet connection container -->
    <div class="wallet-container">
      <w3m-button></w3m-button>
    </div>

    <!-- Mobile navigation toggle button -->
    <button
      id="navToggle"
      class="nav-toggle"
      aria-expanded="false"
      aria-controls="sideNav"
      aria-label="Open navigation"
    >
      <svg width="34" height="34" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path
          d="M3 6h18M3 12h18M3 18h18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
    </button>
  </header>

  <!-- Side navigation menu -->
  <nav id="sideNav" class="side-nav" aria-hidden="true">
    <div class="side-header">
      <h2>Menu</h2>
      <button id="navClose" class="close" aria-label="Close navigation">‚úï</button>
    </div>

    <!-- Navigation list -->
    <ul class="nav-list">
      <li>
        <a href="/user/dashboard" onclick="go('/user/dashboard'); return false;">
          Dashboard
        </a>
      </li>
      <li>
        <a href="/user/projects" onclick="go('/user/projects'); return false;">
          Projects
        </a>
      </li>
      <li>
        <a href="/user/task" onclick="go('/user/task'); return false;">
          Tasks
        </a>
      </li>
      <li>
        <a href="/user/about" onclick="go('/user/about'); return false;">
          About Us
        </a>
      </li>
    </ul>

    <!-- Footer section of side navigation -->
    <div class="side-footer">
      <small>Version 0.1 ¬∑ Trustless Team Protocol</small>
    </div>
  </nav>

  <!-- Overlay for mobile navigation -->
  <div id="overlay" class="overlay"></div>

  
<!-- Main content container -->
<div class="background">
    <div class="dashboard-cards">
        
        <!-- PERHATIAN: CSS berikut berada DI LUAR div.dashboard-cards, tapi MASIH DI DALAM div.background -->
        <style>
            /* Background styling */
            .background {
                padding: 40px;
                display: flex;
                justify-content: center;
            }
            
            /* Dashboard cards grid */
            .dashboard-cards {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 22px;
                width: 90%;
                max-width: 1300px;
                height: 50%;
            }
            
            /* Card header styling */
            .card-header {
                display: flex;
                gap: 12px;
                align-items: center;
                margin-bottom: 18px;
            }
            
            /* Status indicator dots */
            .indicator {
                width: 10px;
                height: 10px;
                border-radius: 50%;
            }
            
            /* Indicator colors */
            .green { background: #49ff86 }
            .purple { background: #7c5cff }
            .blue { background: #35d1ff }
            .red { background: #ff5370 }
            
            /* Gauge wrapper */
            .gauge-box {
                position: relative;
                margin: 8px auto 8px;
                width: 360px;
                height: 220px;
                margin-top: -30px;
            }
            
            /* SVG gauge styling */
            .gauge-svg {
                width: 100%;
            }
            
            .g-track {
                stroke: rgba(255, 255, 255, 0.1);
                stroke-width: 5;
                fill: none;
            }
            
            .g-progress {
                stroke: url(#gStat);
                stroke-width: 6;
                fill: none;
                stroke-dasharray: 126;
                stroke-dashoffset: 126;
                transition: .7s ease-in-out;
            }
            
            /* Gauge value text */
            .g-value {
                position: absolute;
                left: 50%;
                top: 58%;
                transform: translateX(-50%);
                font-size: 16px;
            }
            
            /* Needle indicator */
            .needle {
                position: absolute;
                bottom: 12px;
                left: 50%;
                width: 2px;
                height: 52px;
                background: #ffffff;
                transform-origin: bottom center;
                transform: rotate(-90deg);
                border-radius: 8px;
                transition: .6s ease;
            }
            
            /* Active panel styling */
            .open-panel {
                cursor: pointer;
            }
            
            .open-panel.show .task-panel {
                max-height: 220px;
            }
            
            /* Profile info styling */
            .profile-info p span {
                font-weight: 600;
                color: #e1e1e1;
            }
            
            /* Stats card styling */
            .stats-card ul {
                padding: 0;
                margin: 0;
                list-style: none;
            }
            
            .stats-card li {
                margin-bottom: 8px;
                font-size: 15px;
            }
            
            .stats-card li span {
                color: #7c5cff;
                font-weight: 600;
            }
            
            /* User button styling */
            .userBTN button {
                padding: 4px 8px;
                font-size: 11px;
                height: auto;
                margin: 5px;
            }
            
            /* View task button positioning */
            #ViewTask {
                position: absolute;
                bottom: 0;
                left: 0;
            }
            
            /* Animation keyframes */
            @keyframes slide {
                0% {
                    opacity: 0;
                    transform: translateY(20px);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            /* Responsive design for tablets */
            @media (max-width: 780px) {
                .dashboard-cards {
                    width: 92%;
                }
            }
            
            /* Temporary button card styling */
            .btn-card {
                margin-bottom: -30px;
            }
        </style>
        
        <!-- PROFILE CARD -->
        <div class="card profile-card">
            <div class="card-header">
                <div class="indicator green"></div>
                <h2>My Profile</h2>
            </div>
            <div class="profile-info">
                <p><span>Name:</span> <span id="name">-</span></p>
                <p><span>GitHub:</span> <span id="github">-</span></p>
                <p><span>Age:</span> <span id="age">-</span></p>
                <p><span>Withdrawable:</span> <span id="withdrawable">-</span> <span>ETH</span></p>
            </div>
            <div class="userBTN">
                <button id="withdrawToMe">Withdraw To This Address</button>
                <button id="UnRegister">UnRegister</button>
                <button id="reload">Reload Data</button>
            </div>
        </div>
        
        <!-- STAT GAUGE CARD -->
        <div class="card stats-card">
            <div class="card-header">
                <div class="indicator purple"></div>
                <h2>Task Progress</h2>
            </div>
            <ul>
                <li>Created: <span id="created">-</span></li>
                <li>Completed: <span id="completed">-</span></li>
                <li>Failed: <span id="failed">-</span></li>
                <li>Reputation: <span id="reputation">-</span></li>
            </ul>
        </div>
        
        <!-- ACTIVE TASK CARD -->
        <div class="card link-card open-panel" id="activePanel">
            <div class="gauge-box">
                <svg class="gauge-svg" viewBox="0 0 100 60">
                    <defs>
                        <linearGradient id="gActive" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#35d1ff"/>
                            <stop offset="100%" stop-color="#ffffff"/>
                        </linearGradient>
                    </defs>
                    <path class="g-track" d="M10 60 A40 40 0 0 1 90 60"/>
                    <path class="g-progress" id="g-active" d="M10 60 A40 40 0 0 1 90 60"/>
                </svg>
                <div class="needle" id="needle-active"></div>
                <span class="g-value" id="activeValue">-</span>
            </div>
            <div class="view-btn">
                <button id="ViewTask">View</button>
            </div>
        </div>
    </div>
</div>

  <!-- Footer section - This is OUTSIDE div.background -->
  <footer class="site-footer">
    <div class="footer-content">
      <h3>Contact Our Team</h3>
      <p class="footer-desc">
        Have questions, feedback, or need support? Reach us anytime at
        <a href="mailto:support@trustlessteam.pro">support@trustlessteam.pro</a>
      </p>

      <div class="footer-links">
        <a href="#docs">Documentation</a>
        <a href="#governance">Governance</a>
        <a href="#community">Community</a>
        <a href="#status">System Status</a>
      </div>

      <div class="footer-socials">
        <a href="#" aria-label="Twitter">üê¶</a>
        <a href="#" aria-label="GitHub">üíª</a>
        <a href="#" aria-label="Discord">üí¨</a>
      </div>

      <small>¬© 2025 Trustless Team Protocol ‚Äî All Rights Reserved</small>
    </div>
  </footer>

<!-- Gauge update functions -->
<script>
    // Update gauge visualization
    function updateGauge(gaugeId, needleId, percent) {
        const path = document.getElementById(gaugeId);
        const needle = document.getElementById(needleId);
        
        const total = 126;
        path.style.strokeDashoffset = total - total * (percent / 100);
        
        const angle = -90 + (percent * 1.8);
        needle.style.transform = `rotate(${angle}deg)`;
    }
    
    // Demo gauge values
    updateGauge("g-stat", "needle-stat", 65);
    updateGauge("g-active", "needle-active", 45);
    
    // Toggle active panel
    const panel = document.getElementById("activePanel");
    panel.addEventListener("click", () => {
        panel.classList.toggle("show");
    });
</script>

</body>
</html>