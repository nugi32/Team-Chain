<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Ethers -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

    <!-- Web3Modal v3 HTML button -->
    <script type="module">
        import '@web3modal/html';
    </script>

    <!-- JS utama kamu -->
    <script type="module" src="./user/layouts/js/connectwallet.js"></script>

    <title>Team Chain</title>
</head>
<body>

    <!-- Web3Modal Button -->
    <w3m-button></w3m-button>

    <!-- DEBUG PANEL -->
    <div id="debug-wallet-banner"
        style="position:fixed;top:8px;left:8px;right:8px;z-index:9999;background:#fffb;
        backdrop-filter:blur(4px);padding:10px;margin-top:100px;
        display:flex;gap:10px;align-items:center;box-shadow:0 6px 18px rgba(0,0,0,0.3)">

        <!-- BUTTON 1: GET ADDRESS -->
        <button id="btn-get-address"
            style="padding:8px 12px;border-radius:6px;border:1px solid #333;background:#fff;cursor:pointer;">
            Get Address
        </button>

        <!-- BUTTON 2: GET SIGNER (BARU) -->
        <button id="btn-get-signer"
            style="padding:8px 12px;border-radius:6px;border:1px solid #333;background:#eef;cursor:pointer;">
            Get Signer
        </button>

        <div id="wallet-output"
            style="margin-left:8px;font-size:14px;color:#111;background:rgba(255,255,255,0.85);
            padding:6px 8px;border-radius:6px">
            Output: <span id="wallet-output-text">-</span>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {
    const out = document.getElementById('wallet-output-text');

    const btnAddress = document.getElementById('btn-get-address');
    const btnSigner = document.getElementById('btn-get-signer');

    // ------------------------------
    // BUTTON 1 → GET ADDRESS
    // ------------------------------
    btnAddress.addEventListener('click', async () => {
        out.textContent = "Loading address...";

        try {
            const { address } = await window.getConnectedAddress();
            out.textContent = address || "No wallet connected";
        } catch (err) {
            out.textContent = "Error: " + (err.message || err);
        }
    });

    // ------------------------------
    // BUTTON 2 → GET SIGNER
    // ------------------------------
    btnSigner.addEventListener('click', async () => {
        out.textContent = "Loading signer...";

        try {
            const { signer, address } = await window.getConnectedAddress();

            if (!signer) {
                out.textContent = "Signer unavailable";
                return;
            }

            // Show signer info
            out.textContent = "Signer OK (" + address + ")";
            console.log("Signer object:", signer);

        } catch (err) {
            out.textContent = "Error: " + (err.message || err);
        }
    });

});
</script>

</body>
</html>
